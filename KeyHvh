-- Создаем ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "GameSenseLogin"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Получение Client ID (HWID)
local RbxAnalyticsService = game:GetService("RbxAnalyticsService")
local currentHWID = RbxAnalyticsService:GetClientId()

-- Цвета GameSense
local gs_background = Color3.fromRGB(23, 23, 23)
local gs_inner = Color3.fromRGB(15, 15, 15)
local gs_border = Color3.fromRGB(40, 40, 40)
local gs_text = Color3.fromRGB(200, 200, 200)
local gs_accent = Color3.fromRGB(150, 200, 50)

--==[ ОСНОВНОЙ ФРЕЙМ ]==--
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 320, 0, 260)  -- Немного уменьшил высоту
MainFrame.Position = UDim2.new(0.5, -160, 0.5, -130)
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainFrame.BorderSizePixel = 1
MainFrame.BorderColor3 = Color3.new(0,0,0)
MainFrame.Parent = ScreenGui

-- Внутренний контейнер
local Container = Instance.new("Frame")
Container.Name = "Container"
Container.Size = UDim2.new(1, -2, 1, -2)
Container.Position = UDim2.new(0, 1, 0, 1)
Container.BackgroundColor3 = gs_background
Container.BorderSizePixel = 0
Container.Parent = MainFrame

-- Градиентная полоска сверху
local RainbowBar = Instance.new("Frame")
RainbowBar.Name = "RainbowBar"
RainbowBar.Size = UDim2.new(1, 0, 0, 2)
RainbowBar.Position = UDim2.new(0, 0, 0, 0)
RainbowBar.BorderSizePixel = 0
RainbowBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
RainbowBar.Parent = Container

local UIGradient = Instance.new("UIGradient")
UIGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(55, 175, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(155, 55, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 155, 55))
}
UIGradient.Parent = RainbowBar

-- Заголовок
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Text = "oxygen.lord"
Title.Font = Enum.Font.Code
Title.TextSize = 14
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 5)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Container

-- Кнопка закрытия
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "Close"
CloseButton.Text = "X"
CloseButton.Font = Enum.Font.Code
CloseButton.TextSize = 14
CloseButton.TextColor3 = gs_text
CloseButton.BackgroundTransparency = 1
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 5)
CloseButton.Parent = Container

-- Группа ввода
local GroupBox = Instance.new("Frame")
GroupBox.Size = UDim2.new(1, -20, 0, 180)
GroupBox.Position = UDim2.new(0, 10, 0, 40)
GroupBox.BackgroundColor3 = gs_inner
GroupBox.BorderColor3 = gs_border
GroupBox.BorderSizePixel = 1
GroupBox.Parent = Container

local GroupTitle = Instance.new("TextLabel")
GroupTitle.Text = "Key Authentication"
GroupTitle.Font = Enum.Font.Code
GroupTitle.TextSize = 13
GroupTitle.TextColor3 = gs_text
GroupTitle.BackgroundTransparency = 1
GroupTitle.Position = UDim2.new(0, 10, 0, -8)
GroupTitle.Size = UDim2.new(0, 120, 0, 16)
GroupTitle.BackgroundColor3 = gs_background
GroupTitle.ZIndex = 2
GroupTitle.Parent = GroupBox

-- Поле ввода ключа
local function createKeyInput()
    local Label = Instance.new("TextLabel")
    Label.Text = "Key"
    Label.Font = Enum.Font.Code
    Label.TextSize = 13
    Label.TextColor3 = gs_text
    Label.BackgroundTransparency = 1
    Label.Size = UDim2.new(1, 0, 0, 20)
    Label.Position = UDim2.new(0, 15, 0, 20)
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = GroupBox

    local InputFrame = Instance.new("Frame")
    InputFrame.Size = UDim2.new(1, -30, 0, 22)
    InputFrame.Position = UDim2.new(0, 15, 0, 45)
    InputFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    InputFrame.BorderColor3 = Color3.fromRGB(45, 45, 45)
    InputFrame.Parent = GroupBox

    local KeyInput = Instance.new("TextBox")
    KeyInput.Size = UDim2.new(1, -10, 1, 0)
    KeyInput.Position = UDim2.new(0, 5, 0, 0)
    KeyInput.BackgroundTransparency = 1
    KeyInput.Text = ""
    KeyInput.PlaceholderText = "enter key"
    KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyInput.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
    KeyInput.Font = Enum.Font.Code
    KeyInput.TextSize = 13
    KeyInput.TextXAlignment = Enum.TextXAlignment.Left
    KeyInput.Parent = InputFrame

    return KeyInput
end

local KeyInput = createKeyInput()

-- Кнопка Load
local SubmitButton = Instance.new("TextButton")
SubmitButton.Size = UDim2.new(1, -30, 0, 25)
SubmitButton.Position = UDim2.new(0, 15, 0, 90)
SubmitButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SubmitButton.BorderColor3 = Color3.fromRGB(50, 50, 50)
SubmitButton.Text = "Load"
SubmitButton.Font = Enum.Font.Code
SubmitButton.TextSize = 13
SubmitButton.TextColor3 = gs_text
SubmitButton.Parent = GroupBox

-- HWID Label + Copy
local HWIDLabel = Instance.new("TextLabel")
HWIDLabel.Size = UDim2.new(1, -80, 0, 20)
HWIDLabel.Position = UDim2.new(0, 15, 0, 130)
HWIDLabel.BackgroundTransparency = 1
HWIDLabel.Text = "hwid: " .. string.sub(currentHWID, 1, 15) .. "..."
HWIDLabel.TextColor3 = Color3.fromRGB(100, 100, 100)
HWIDLabel.TextSize = 12
HWIDLabel.Font = Enum.Font.Code
HWIDLabel.TextXAlignment = Enum.TextXAlignment.Left
HWIDLabel.Parent = GroupBox

local CopyButton = Instance.new("TextButton")
CopyButton.Size = UDim2.new(0, 50, 0, 20)
CopyButton.Position = UDim2.new(1, -65, 0, 130)
CopyButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
CopyButton.BorderColor3 = Color3.fromRGB(50, 50, 50)
CopyButton.Text = "copy"
CopyButton.TextColor3 = gs_text
CopyButton.TextSize = 12
CopyButton.Font = Enum.Font.Code
CopyButton.Parent = GroupBox

--==[ БАЗА КЛЮЧЕЙ (пример, меняй под себя) ]==--
local validKeys = {
    ["OXYGEN-KEY-1337"] = "3888EE74-49BA-47E8-9B60-5F1C80ACB331",
    ["SUVWASHERE"] = "9DF318DA-2B76-4D6F-9E6F-0E482C3043A7",
    ["oxygen.ksHJ2j-30-1.1.26"] = "D8D74D03-9D73-40AE-8BAC-01B59E0751FB",
    ["oxygen.hdDJ2j-30-1.1.26"] = "F4E94806-BCB6-488F-907A-06A61AFFB5CA",
    ["oxygen.hdBJ2j-30-1.1.26"] = "02918FA7-17FD-4C1D-A79A-709E57B47B84"
    -- Добавляй свои ключи здесь (без запятой после последнего!)
}

--==[ ЛОГИКА ]==--
CopyButton.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(currentHWID)
        CopyButton.Text = "OK"
        task.wait(1)
        CopyButton.Text = "copy"
    else
        CopyButton.Text = "Fail"
        task.wait(1)
        CopyButton.Text = "copy"
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

SubmitButton.MouseButton1Click:Connect(function()
    local enteredKey = KeyInput.Text

    -- Анимация нажатия
    SubmitButton.BackgroundColor3 = gs_accent
    SubmitButton.TextColor3 = Color3.new(0,0,0)
    task.wait(0.1)
    SubmitButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    SubmitButton.TextColor3 = gs_text

    if validKeys[enteredKey] and validKeys[enteredKey] == currentHWID then
        MainFrame.Visible = false

        -- Успешный вход
        local SuccessFrame = Instance.new("Frame")
        SuccessFrame.Size = UDim2.new(0, 300, 0, 150)
        SuccessFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
        SuccessFrame.BackgroundColor3 = gs_background
        SuccessFrame.BorderColor3 = gs_accent
        SuccessFrame.BorderSizePixel = 2
        SuccessFrame.Parent = ScreenGui

        local Msg = Instance.new("TextLabel")
        Msg.Size = UDim2.new(1, 0, 0.5, 0)
        Msg.BackgroundTransparency = 1
        Msg.Text = "Key accepted!"
        Msg.TextColor3 = Color3.fromRGB(255, 255, 255)
        Msg.Font = Enum.Font.Code
        Msg.TextSize = 18
        Msg.Parent = SuccessFrame

        local SubMsg = Instance.new("TextLabel")
        SubMsg.Size = UDim2.new(1, 0, 0.3, 0)
        SubMsg.Position = UDim2.new(0,0,0.5,0)
        SubMsg.BackgroundTransparency = 1
        SubMsg.Text = "Welcome back"
        SubMsg.TextColor3 = gs_accent
        SubMsg.Font = Enum.Font.Code
        SubMsg.TextSize = 14
        SubMsg.Parent = SuccessFrame

        task.wait(2)
        SuccessFrame:Destroy()

        -- Загрузка основного скрипта
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mazahistvdc2-del/roblox/refs/heads/main/HvHsource"))()

        ScreenGui:Destroy()
    else
        KeyInput.Text = ""
        KeyInput.PlaceholderText = "invalid key"
        task.wait(2)
        KeyInput.PlaceholderText = "enter key"
    end
end)

-- Dragging (перетаскивание за радужную полоску)
local UserInputService = game:GetService("UserInputService")
local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

RainbowBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
    end
end)

RainbowBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

RainbowBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)
